<div id="history-div" class="mt-2 p-2">
  <h5 class="text-center">{{ 'history' | translate | uppercase }}</h5>
  <hr>
  <div class="row m-0">
    <div class="col d-flex align-items-center">
      <label>{{ 'period' | translate | titlecase }}</label>
      <label>{{ 'from' | translate | lowercase }}</label>
      <p-calendar [(ngModel)]="dtBeg" (onSelect)="changeDate($event)" dateFormat="dd.mm.yy" showIcon="true" class="mr-5" [inputStyle]="{'width':'7rem'}"
        readonlyInput="true"></p-calendar>
      <label>{{ 'to' | translate | lowercase }}</label>
      <p-calendar [(ngModel)]="dtEnd" (onSelect)="changeDate($event)" dateFormat="dd.mm.yy" showIcon="true" [inputStyle]="{'width':'7rem'}"
        [icon]="icon" readonlyInput="true"></p-calendar>
    </div>
    <div class="col d-flex align-items-center">
      <label for="filter" class="mr-2">Filter:</label>
      <p-multiSelect [options]="events" [(ngModel)]="selectedEvents" [panelStyle]="{ width:'15em' }"></p-multiSelect>
    </div>
  </div>
  <hr>

  <p-table [value]="history" [resizableColumns]="true" selectionMode="single" [(selection)]="selectedHistory" sortMode="multiple">
    <ng-template pTemplate="header">
      <tr>
        <th class="text-center" style="width: 175px;" [pSortableColumn]="'time'">
          Time
          <p-sortIcon [field]="'time'"></p-sortIcon>
        </th>
        <th class="text-center" pResizableColumn>Name</th>
        <th class="text-center" pResizableColumn>Object</th>
        <th class="text-center" pResizableColumn>Description</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-h>
      <tr [pSelectableRow]="h" [hidden]="!selectedEvents.includes(h.idEvent)">
        <td class="text-center">{{ h.time | date:'dd.MM.yyyy HH:mm:ss' }}</td>
        <td>{{ h['event'] }}</td>
        <td>{{ h['user'] }}</td>
        <td>{{ h.desc }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>